<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Working with Zonation projects • zonator</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Working with Zonation projects">
<meta property="og:description" content="zonator">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">zonator</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.6.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/zonator-project.html">Working with Zonation projects</a>
    </li>
    <li>
      <a href="../articles/zonator-results.html">Working with Zonation results</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/cbig/zonator/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="zonator-project_files/header-attrs-2.1/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Working with Zonation projects</h1>
                        <h4 class="author">Joona Lehtomäki</h4>
            
            <h4 class="date">2020-05-17</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/cbig/zonator/blob/master/vignettes/zonator-project.Rmd"><code>vignettes/zonator-project.Rmd</code></a></small>
      <div class="hidden name"><code>zonator-project.Rmd</code></div>

    </div>

    
    
<div id="zonation-projects-and-zonator-classes" class="section level2">
<h2 class="hasAnchor">
<a href="#zonation-projects-and-zonator-classes" class="anchor"></a>1. Zonation projects and zonator classes</h2>
<p>The following examples will use the basic Zonation tutorial data as shipped with the <a href="https://github.com/cbig/zdat"><code>zdat</code></a> package. <a href="https://github.com/cbig/zdat/tree/master/inst/extdata">The input and output files</a> in the tutorial package are arranged in a layout that has a specific logic behind it. In Zonation jargon, everything within the root folder <code>basic</code> is consider to belong to the same <strong>project</strong> (see figure below). A project constitutes of one or several <strong>variants</strong>. Each variant is an individual Zonation run with specific input biodidiversity features (defined in <code>01.spp</code>) and input parameters (defined in <code>01.dat</code>). All the configuration files needed for a run are specified in a Windows batch file (<code>01_core_area_zonation.bat</code>). For convience and clarity, input files required are placed in a subfolder named after the variant. After the variant is run (in Zonation), the outputs of the variant are placed in another subfolder (e.g. <code>01/01_out/</code>).</p>
<div class="figure">
<img src="img/folder_structure.png" alt=""><p class="caption">Folder structure</p>
</div>
<p>All in all, the tutorial data has one project which has five variants (not all are shown in the figure above for brevity). Note that these specification are just a useful convention and are not at all required by Zonation (or zonator)! Note also that these specification are related to Zonation itself. Conceptually, <code>zonator</code> uses the same terminology and the S4 classes in <code>zonator</code> follow the same logic. <code>zonator</code> provides a two functions <code><a href="../reference/create_zproject.html">create_zproject()</a></code> and <code><a href="../reference/load_zproject.html">load_zproject()</a></code> that can be used to:</p>
<ol style="list-style-type: decimal">
<li>Create a new Zonation project on the file system (<code><a href="../reference/create_zproject.html">create_zproject()</a></code>)</li>
<li>Create zonator project based on existing Zonation project (<code><a href="../reference/load_zproject.html">load_zproject()</a></code>)</li>
</ol>
<p><code><a href="../reference/load_zproject.html">load_zproject()</a></code> works by parsing real input files on your file system (needed by Zonation) into R data structures. Formally, <code><a href="../reference/load_zproject.html">load_zproject()</a></code> creates a new instance (object) of class <code>Zproject</code> with has specific attributes representing the Zonation project on the file system. Each variant (see above) is parsed into an instance of class <code>Zvariant</code>. If a variant already has results produced by Zonation, then these are parsed and mapped into an instance of class <code>Zresults</code>.</p>
<div class="figure">
<img src="img/class_structure.png" alt=""><p class="caption">Class structure</p>
</div>
<p>Each class has specific methods that can be used to get and set attributes, see documentation and the packages vignettes for more detailed description.</p>
</div>
<div id="create-a-new-zonation-project" class="section level2">
<h2 class="hasAnchor">
<a href="#create-a-new-zonation-project" class="anchor"></a>2. Create a new Zonation project</h2>
<p>As mentioned above, <code>zonator</code> packages provides function <code><a href="../reference/create_zproject.html">create_zproject()</a></code> that can be used to create all the necessary files and folders for a new Zonation project. Let’s take a closer look:</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">zonator</span>)

<span class="co"># Create a (temporary) path to a new project. Basename component of this path</span>
<span class="co"># will also be the name of the project.</span>
<span class="no">project_path</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>())

<span class="co"># Define the names of the variants within the project</span>
<span class="no">variant_names</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"01_variant"</span>, <span class="st">"02_variant"</span>, <span class="st">"03_variant"</span>)</pre></body></html></div>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="co"># Create a new project from scratch. Note that since we do not provide any </span>
<span class="co"># template file paths (for the .spp and .dat files), the templates shipped</span>
<span class="co"># with the tutorial data will be used.</span>
<span class="fu"><a href="../reference/create_zproject.html">create_zproject</a></span>(<span class="kw">name</span> <span class="kw">=</span> <span class="st">"test_project"</span>, <span class="kw">dir</span> <span class="kw">=</span> <span class="no">project_path</span>,
                <span class="kw">variants</span> <span class="kw">=</span> <span class="no">variant_names</span>)</pre></body></html></div>
<p>If you ran these examples on your own computer, you can now open path defined in <code>project_path</code> in your file browser to see what was created. Another useful option for <code><a href="../reference/create_zproject.html">create_zproject()</a></code> is that it can scan the content of a given directory for raster (input biodiversity feature) files and construct a spp-file based on the file listing. Let’s create a new project from scratch using input raster files shipped with the Zonation tutorial as a basis for the spp file. Since the input folder contains more rasters than just biodiversity files, we’ll be using a file name filter. Note that we are still usingthe template .dat-file.</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="co"># Directory containing the input raster files</span>
<span class="no">input_raster_dir</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"extdata/test_project/data"</span>, <span class="kw">package</span><span class="kw">=</span><span class="st">"zonator"</span>)
<span class="no">new_project</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/create_zproject.html">create_zproject</a></span>(<span class="kw">name</span> <span class="kw">=</span> <span class="st">"test_project"</span>, <span class="kw">dir</span> <span class="kw">=</span> <span class="no">project_path</span>,
                               <span class="kw">variants</span> <span class="kw">=</span> <span class="no">variant_names</span>,
                               <span class="kw">spp_template_dir</span> <span class="kw">=</span> <span class="no">input_raster_dir</span>,
                               <span class="kw">spp_file_pattern</span> <span class="kw">=</span> <span class="st">"^species[0-9].tif$"</span>)</pre></body></html></div>
<p>You can give extra arguments to <code><a href="../reference/create_zproject.html">create_zproject()</a></code> that will be passed on to creating the spp file. E.g. if you would want the set different weights to your biodiversity features, you could do the following:</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r">new_project &lt;- create_zproject(name = "test_project", dir = project_path, 
                               variants = variant_names,
                               spp_template_dir = input_raster_dir,
                               spp_file_pattern = "^species[0-9].tif$",
                               weight = c(1, 1, 1, 2, 3, 2, 1)</pre></body></html></div>
<p>Be careful with setting the weights (or other spp-file parameters such as the alpha value), because no checking is being done!</p>
</div>
<div id="create-zonator-project-based-on-existing-data" class="section level2">
<h2 class="hasAnchor">
<a href="#create-zonator-project-based-on-existing-data" class="anchor"></a>3. Create zonator project based on existing data</h2>
<p>Alternatively, all the information contained within an existing Zonation project can be parsed into R data structures. The tutorial data is not distributed with <code>zonator</code>, but in a separate package <a href="https://github.com/cbig/zdat"><code>zdat</code></a>. You can - and must if you want to run the examples below - install the package by:</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">devtools</span>)
<span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">"cbig/zdat"</span>)</pre></body></html></div>
<p>The tutorial data include results of the tutorial runs so there is no need to run the variants in order to inspect the results. In case you <em>do</em> want to rerun the variants and you have Zonation installed in your system do so by running the following code. Otherwise just skip this code section.</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">zonator</span>)

<span class="no">setup.dir</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"extdata/basic"</span>, <span class="kw">package</span> <span class="kw">=</span> <span class="st">"zdat"</span>)

<span class="co"># Get all the bat-files</span>
<span class="no">bat.files</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span>(<span class="no">setup.dir</span>, <span class="st">"\\.bat$"</span>, <span class="kw">full.names</span> <span class="kw">=</span> <span class="fl">TRUE</span>)
<span class="co">## </span>
<span class="co">## # Run all the runs</span>
<span class="co">## #for (bat.file in bat.files) {</span>
<span class="co">## #  run_bat(bat.file)</span>
<span class="co">## #}</span>
<span class="co">## </span></pre></body></html></div>
<p>You can create a new zonator project based on existing data by using <code><a href="../reference/load_zproject.html">load_zproject()</a></code>:</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="no">tutorial.project</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/load_zproject.html">load_zproject</a></span>(<span class="no">setup.dir</span>)</pre></body></html></div>
<p><strong>Pro tip!</strong> In case you have a complex Zonation project and want to keep track which files are being read in while creating zproject, you can do <code><a href="../reference/load_zproject.html">load_zproject(setup.dir, debug=TRUE)</a></code> in order to enable logging of file reading sequence.</p>
<p>zonator also includes a utility function <code><a href="../reference/opendir-methods.html">opendir()</a></code> which takes a zproject object as an argument and opens the file system folder containing the setup files:</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="fu"><a href="../reference/opendir-methods.html">opendir</a></span>(<span class="no">tutorial.project</span>)</pre></body></html></div>
</div>
<div id="working-with-variants" class="section level2">
<h2 class="hasAnchor">
<a href="#working-with-variants" class="anchor"></a>2. Working with variants</h2>
<p>Individual variants (i.e. runs) can be extracted form the project using an index number. <code><a href="../reference/nvariants-methods.html">nvariants()</a></code> will tell how many variants are included in the project.</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="fu"><a href="../reference/nvariants-methods.html">nvariants</a></span>(<span class="no">tutorial.project</span>)</pre></body></html></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="no">variant.1</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_variant-methods.html">get_variant</a></span>(<span class="no">tutorial.project</span>, <span class="fl">1</span>)</pre></body></html></div>
<p>Using an index number such as <code>1</code> is one option, but you can also use the name of the variant. By default, zonator will assign the name of bat-file used to run the run as a name, without the “.bat” extensions of course. <code><a href="https://rdrr.io/r/base/names.html">names()</a></code> will print the names of all the variants. Name can also be used to extract a variant.</p>
<div class="sourceCode" id="cb12"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span>(<span class="no">tutorial.project</span>)</pre></body></html></div>
<pre><code>## [1] "01" "02" "03" "04" "05" "07"</code></pre>
<div class="sourceCode" id="cb14"><html><body><pre class="r"><span class="co"># Get first variant, 01_core_area_zonation</span>
<span class="no">variant.caz</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_variant-methods.html">get_variant</a></span>(<span class="no">tutorial.project</span>, <span class="st">"01"</span>)</pre></body></html></div>
<p>Each variant object is an instance of class <code>Zvariant</code> and have a suite of useful methods for dealing with data parsed from various Zonation input files.</p>
<div id="spp-data" class="section level3">
<h3 class="hasAnchor">
<a href="#spp-data" class="anchor"></a>2.1 spp data</h3>
<p>Zonation spp-file is one of the mandatory input files that always needs to be in place and thus all variants have one. When a new <code>Zvariant</code> instance is created the associated spp file is automatically parsed into it. All the spp data (with group code column if available) can be retrieved using <code><a href="../reference/sppdata-methods.html">sppdata()</a></code>:</p>
<div class="sourceCode" id="cb15"><html><body><pre class="r"><span class="fu"><a href="../reference/sppdata-methods.html">sppdata</a></span>(<span class="no">variant.caz</span>)</pre></body></html></div>
<pre><code>##   weight alpha bqp bqp_p cellrem             filepath     name group
## 1      1  1.00   1     1       1 ../data/species1.tif species1     1
## 2      1  0.50   1     1       1 ../data/species2.tif species2     2
## 3      1  0.25   1     1       1 ../data/species3.tif species3     2
## 4      1  0.75   1     1       1 ../data/species4.tif species4     1
## 5      1  0.50   1     1       1 ../data/species5.tif species5     2
## 6      1  1.50   1     1       1 ../data/species6.tif species6     1
## 7      1  1.00   1     1       1 ../data/species7.tif species7     1</code></pre>
<p>You can check the number of features in spp file by using method <code><a href="../reference/nfeatures-methods.html">nfeatures()</a></code>:</p>
<div class="sourceCode" id="cb17"><html><body><pre class="r"><span class="fu"><a href="../reference/nfeatures-methods.html">nfeatures</a></span>(<span class="no">variant.caz</span>)</pre></body></html></div>
<pre><code>## [1] 7</code></pre>
<p><code>Zvariant</code> objects have a couple of other convenience functions for quickly accessing columns in the spp file. For example, <code><a href="../reference/sppweights-methods.html">sppweights()</a></code> can be used to extract the weight column in spp file:</p>
<div class="sourceCode" id="cb19"><html><body><pre class="r"><span class="co"># Note that all biodiversity features (species) have an equal weight of 1</span>
<span class="fu"><a href="../reference/sppweights-methods.html">sppweights</a></span>(<span class="no">variant.caz</span>)</pre></body></html></div>
<pre><code>## [1] 1 1 1 1 1 1 1</code></pre>
<p>Feature names from the spp file/data can be accessed directly by using method <code><a href="../reference/featurenames-methods.html">featurenames()</a></code>.</p>
<div class="sourceCode" id="cb21"><html><body><pre class="r"><span class="fu"><a href="../reference/featurenames-methods.html">featurenames</a></span>(<span class="no">variant.caz</span>)</pre></body></html></div>
<pre><code>## [1] "species1" "species2" "species3" "species4" "species5" "species6" "species7"</code></pre>
<p>The generated names are not necessarily very informative and can be changed to new values. Remember that the names need to be valid data frame column names (zontor will try to fix these even if you don’t).</p>
<div class="sourceCode" id="cb23"><html><body><pre class="r"><span class="fu"><a href="../reference/featurenames-methods.html">featurenames</a></span>(<span class="no">variant.caz</span>) <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Koala"</span>, <span class="st">"Masked.owl"</span>, <span class="st">"Powerful.owl"</span>,
                             <span class="st">"Tiger.quoll"</span>, <span class="st">"Sooty.owl"</span>, <span class="st">"Squirrel.glider"</span>,
                             <span class="st">"Yellow-bellied.glider"</span>)
<span class="fu"><a href="../reference/featurenames-methods.html">featurenames</a></span>(<span class="no">variant.caz</span>)</pre></body></html></div>
<pre><code>## [1] "Koala"                 "Masked.owl"            "Powerful.owl"          "Tiger.quoll"          
## [5] "Sooty.owl"             "Squirrel.glider"       "Yellow-bellied.glider"</code></pre>
<div class="sourceCode" id="cb25"><html><body><pre class="r"><span class="co"># Or all the spp data</span>
<span class="fu"><a href="../reference/sppdata-methods.html">sppdata</a></span>(<span class="no">variant.caz</span>)</pre></body></html></div>
<pre><code>##   weight alpha bqp bqp_p cellrem             filepath                  name group
## 1      1  1.00   1     1       1 ../data/species1.tif                 Koala     1
## 2      1  0.50   1     1       1 ../data/species2.tif            Masked.owl     2
## 3      1  0.25   1     1       1 ../data/species3.tif          Powerful.owl     2
## 4      1  0.75   1     1       1 ../data/species4.tif           Tiger.quoll     1
## 5      1  0.50   1     1       1 ../data/species5.tif             Sooty.owl     2
## 6      1  1.50   1     1       1 ../data/species6.tif       Squirrel.glider     1
## 7      1  1.00   1     1       1 ../data/species7.tif Yellow-bellied.glider     1</code></pre>
</div>
<div id="groups" class="section level3">
<h3 class="hasAnchor">
<a href="#groups" class="anchor"></a>2.2 Groups</h3>
<p>Notice that data frames returned by <code><a href="../reference/sppdata-methods.html">sppdata()</a></code> in previous examples already had a column called “group”. This is because all tutorial variants have groups enabled by default. If a variant doesn’t use groups, then this column will be missing.</p>
<p>Group identities in Zonation input file are coded with integer values. Method <code><a href="../reference/groups-methods.html">groups()</a></code> will return just this integer vector:</p>
<div class="sourceCode" id="cb27"><html><body><pre class="r"><span class="fu"><a href="../reference/groups-methods.html">groups</a></span>(<span class="no">variant.caz</span>)</pre></body></html></div>
<pre><code>## [1] 1 2 2 1 2 1 1</code></pre>
<p>Groups can also have more informative names attached to them by using method <code><a href="../reference/groupnames-methods.html">groupnames()</a></code>. Even if you haven’t names the groups used (Zonation does not have a concept of named groups), generic group names “group1”, “group2” etc. will automatically be created for <code>Zvariant</code> objects with groups enabled.</p>
<div class="sourceCode" id="cb29"><html><body><pre class="r"><span class="co"># By default, generic group names are used</span>
<span class="fu"><a href="../reference/groupnames-methods.html">groupnames</a></span>(<span class="no">variant.caz</span>)</pre></body></html></div>
<pre><code>## [1] "group1" "group2"</code></pre>
<p>The format for setting (mapping) group names is strict and involves a named character vector in which (column) names correspond to integer group codes and character elements the group names to be assigned:</p>
<div class="sourceCode" id="cb31"><html><body><pre class="r"><span class="co"># Construct a group name mapping using a named character vector</span>
<span class="fu"><a href="../reference/groupnames-methods.html">groupnames</a></span>(<span class="no">variant.caz</span>) <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"1"</span> <span class="kw">=</span> <span class="st">"mammals"</span>, <span class="st">"2"</span> <span class="kw">=</span> <span class="st">"owls"</span>)
<span class="fu"><a href="../reference/groupnames-methods.html">groupnames</a></span>(<span class="no">variant.caz</span>)</pre></body></html></div>
<pre><code>## [1] "mammals" "owls"</code></pre>
<p>Now group 1 is labeled “mammals” and group 2 is labeled “owls”. Note that <code><a href="../reference/sppdata-methods.html">sppdata()</a></code> has an optional argument <code>group.names</code> that can be set to <code>TRUE</code> if group names are preferable to group codes.</p>
<div class="sourceCode" id="cb33"><html><body><pre class="r"><span class="fu"><a href="../reference/sppdata-methods.html">sppdata</a></span>(<span class="no">variant.caz</span>, <span class="kw">group.names</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></body></html></div>
<pre><code>##   weight alpha bqp bqp_p cellrem             filepath                  name group.name
## 1      1  1.00   1     1       1 ../data/species1.tif                 Koala    mammals
## 2      1  0.50   1     1       1 ../data/species2.tif            Masked.owl       owls
## 3      1  0.25   1     1       1 ../data/species3.tif          Powerful.owl       owls
## 4      1  0.75   1     1       1 ../data/species4.tif           Tiger.quoll    mammals
## 5      1  0.50   1     1       1 ../data/species5.tif             Sooty.owl       owls
## 6      1  1.50   1     1       1 ../data/species6.tif       Squirrel.glider    mammals
## 7      1  1.00   1     1       1 ../data/species7.tif Yellow-bellied.glider    mammals</code></pre>
<p>In addition to changing the group names, you can change the groups themselves as well. In the previous examples we had two groups named “mammals” (group code = 1) and “owls” (group code = 2). Belonging to either one of these groups is controlled by the group ID code (an integer number) that can be accessed by <code><a href="../reference/groups-methods.html">groups()</a></code>:</p>
<div class="sourceCode" id="cb35"><html><body><pre class="r"><span class="fu"><a href="../reference/groups-methods.html">groups</a></span>(<span class="no">variant.caz</span>)</pre></body></html></div>
<pre><code>## [1] 1 2 2 1 2 1 1</code></pre>
<p>Method <code><a href="../reference/groups-methods.html">groups()</a></code> can be used to set the group ID codes and thus the grouping. Let’s say you want to split owls into two sub-groups called “big.owls” (group code = 2) containing the Sooty owl and the Masked Owl and “small.owls” (group code = 3) containing the Powerful owl. Take again a look at the spp data:</p>
<div class="sourceCode" id="cb37"><html><body><pre class="r"><span class="fu"><a href="../reference/sppdata-methods.html">sppdata</a></span>(<span class="no">variant.caz</span>)</pre></body></html></div>
<pre><code>##   weight alpha bqp bqp_p cellrem             filepath                  name group
## 1      1  1.00   1     1       1 ../data/species1.tif                 Koala     1
## 2      1  0.50   1     1       1 ../data/species2.tif            Masked.owl     2
## 3      1  0.25   1     1       1 ../data/species3.tif          Powerful.owl     2
## 4      1  0.75   1     1       1 ../data/species4.tif           Tiger.quoll     1
## 5      1  0.50   1     1       1 ../data/species5.tif             Sooty.owl     2
## 6      1  1.50   1     1       1 ../data/species6.tif       Squirrel.glider     1
## 7      1  1.00   1     1       1 ../data/species7.tif Yellow-bellied.glider     1</code></pre>
<p>What needs to be done is to change the group ID for the Powerful owl so that the group ID vector is changed into <code>1, 2, 3, 1, 2, 1, 1</code>. So do the following:</p>
<div class="sourceCode" id="cb39"><html><body><pre class="r"><span class="fu"><a href="../reference/groups-methods.html">groups</a></span>(<span class="no">variant.caz</span>) <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">1</span>)
<span class="co"># Check the group ID codes</span>
<span class="fu"><a href="../reference/groups-methods.html">groups</a></span>(<span class="no">variant.caz</span>)</pre></body></html></div>
<pre><code>## [1] 1 2 3 1 2 1 1</code></pre>
<p>Note that after you change the group ID codes all the group names you may have assigned get lost and are again replaced by generic “group1”, “group2” etc. You will have to manually set the group names again:</p>
<div class="sourceCode" id="cb41"><html><body><pre class="r"><span class="co"># Using generic group names after the group IDs have been changed</span>
<span class="fu"><a href="../reference/groupnames-methods.html">groupnames</a></span>(<span class="no">variant.caz</span>)</pre></body></html></div>
<pre><code>## [1] "group1" "group2" "group3"</code></pre>
<div class="sourceCode" id="cb43"><html><body><pre class="r"><span class="co"># Construct a new group names mapping</span>
<span class="fu"><a href="../reference/groupnames-methods.html">groupnames</a></span>(<span class="no">variant.caz</span>) <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"1"</span> <span class="kw">=</span> <span class="st">"mammals"</span>, <span class="st">"2"</span> <span class="kw">=</span> <span class="st">"big.owls"</span>,
                             <span class="st">"3"</span> <span class="kw">=</span> <span class="st">"small.owls"</span>)
<span class="fu"><a href="../reference/groupnames-methods.html">groupnames</a></span>(<span class="no">variant.caz</span>)</pre></body></html></div>
<pre><code>## [1] "mammals"    "big.owls"   "small.owls"</code></pre>
<p>or check the whole spp data with group names:</p>
<div class="sourceCode" id="cb45"><html><body><pre class="r"><span class="fu"><a href="../reference/sppdata-methods.html">sppdata</a></span>(<span class="no">variant.caz</span>, <span class="kw">group.names</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></body></html></div>
<pre><code>##   weight alpha bqp bqp_p cellrem             filepath                  name group.name
## 1      1  1.00   1     1       1 ../data/species1.tif                 Koala    mammals
## 2      1  0.50   1     1       1 ../data/species2.tif            Masked.owl   big.owls
## 3      1  0.25   1     1       1 ../data/species3.tif          Powerful.owl small.owls
## 4      1  0.75   1     1       1 ../data/species4.tif           Tiger.quoll    mammals
## 5      1  0.50   1     1       1 ../data/species5.tif             Sooty.owl   big.owls
## 6      1  1.50   1     1       1 ../data/species6.tif       Squirrel.glider    mammals
## 7      1  1.00   1     1       1 ../data/species7.tif Yellow-bellied.glider    mammals</code></pre>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Joona Lehtomaki.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
